!function(){"use strict";var r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function o(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),i.hasOwnProperty(e)?{space:i[e],local:t}:t}function l(t){var e=o(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===r&&t.documentElement.namespaceURI===r?t.createElement(n):t.createElementNS(e,n)}})(e)}function e(){}function h(t){return null==t?e:function(){return this.querySelector(t)}}function f(){return[]}function t(t){return new Array(t.length)}function p(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}p.prototype={constructor:p,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var g="$";function w(t,e,n,r,i,o){for(var a,l=0,s=e.length,u=o.length;l<u;++l)(a=e[l])?(a.__data__=o[l],r[l]=a):n[l]=new p(t,o[l]);for(;l<s;++l)(a=e[l])&&(i[l]=a)}function M(t,e,n,r,i,o,a){var l,s,u,c={},h=e.length,f=o.length,d=new Array(h);for(l=0;l<h;++l)(s=e[l])&&(d[l]=u=g+a.call(s,s.__data__,l,e),u in c?i[l]=s:c[u]=s);for(l=0;l<f;++l)(s=c[u=g+a.call(t,o[l],l,o)])?((r[l]=s).__data__=o[l],c[u]=null):n[l]=new p(t,o[l]);for(l=0;l<h;++l)(s=e[l])&&c[d[l]]===s&&(i[l]=s)}function d(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function a(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function s(t){return t.trim().split(/^|\s+/)}function u(t){return t.classList||new n(t)}function n(t){this._node=t,this._names=s(t.getAttribute("class")||"")}function c(t,e){for(var n=u(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function m(t,e){for(var n=u(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function v(){this.textContent=""}function y(){this.innerHTML=""}function b(){this.nextSibling&&this.parentNode.appendChild(this)}function _(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function x(){return null}function k(){var t=this.parentNode;t&&t.removeChild(this)}function C(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function N(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}n.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);0<=e&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var A={};"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(A={mouseenter:"mouseover",mouseleave:"mouseout"}));function E(n,t,e){return n=B(n,t,e),function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}function B(e,n,r){return function(t){try{e.call(this,this.__data__,n,r)}finally{}}}function T(o){return function(){var t=this.__on;if(t){for(var e,n=0,r=-1,i=t.length;n<i;++n)e=t[n],o.type&&e.type!==o.type||e.name!==o.name?t[++r]=e:this.removeEventListener(e.type,e.listener,e.capture);++r?t.length=r:delete this.__on}}}function S(s,u,c){var h=A.hasOwnProperty(s.type)?E:B;return function(t,e,n){var r,i=this.__on,o=h(u,e,n);if(i)for(var a=0,l=i.length;a<l;++a)if((r=i[a]).type===s.type&&r.name===s.name)return this.removeEventListener(r.type,r.listener,r.capture),this.addEventListener(r.type,r.listener=o,r.capture=c),void(r.value=u);this.addEventListener(s.type,o,c),r={type:s.type,name:s.name,value:u,listener:o,capture:c},i?i.push(r):this.__on=[r]}}function R(t,e,n){var r=a(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}var P=[null];function F(t,e){this._groups=t,this._parents=e}function L(){return new F([[document.documentElement]],P)}function xt(t){return"string"==typeof t?new F([[document.querySelector(t)]],[document.documentElement]):new F([[t]],P)}function z(t){if("string"!=typeof t)return t;var e,n={},r=t.split(/([\.#])/g);for(t=r.shift();e=r.shift();)"."==e?n.class=n.class?n.class+" "+r.shift():r.shift():"#"==e&&(n.id=r.shift());return{tag:t,attr:n}}function O(){return null}F.prototype=L.prototype={constructor:F,select:function(t){"function"!=typeof t&&(t=h(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,l=e[i],s=l.length,u=r[i]=new Array(s),c=0;c<s;++c)(o=l[c])&&(a=t.call(o,o.__data__,c,l))&&("__data__"in o&&(a.__data__=o.__data__),u[c]=a);return new F(r,this._parents)},selectAll:function(t){var e;"function"!=typeof t&&(t=null==(e=t)?f:function(){return this.querySelectorAll(e)});for(var n=this._groups,r=n.length,i=[],o=[],a=0;a<r;++a)for(var l,s=n[a],u=s.length,c=0;c<u;++c)(l=s[c])&&(i.push(t.call(l,l.__data__,c,s)),o.push(l));return new F(i,o)},filter:function(t){var e;"function"!=typeof t&&(e=t,t=function(){return this.matches(e)});for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o)for(var a,l=n[o],s=l.length,u=i[o]=[],c=0;c<s;++c)(a=l[c])&&t.call(a,a.__data__,c,l)&&u.push(a);return new F(i,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),c=-1,this.each(function(t){p[++c]=t}),p;var n,r=e?M:w,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,l=new Array(a),s=new Array(a),u=new Array(a),c=0;c<a;++c){var h=i[c],f=o[c],d=f.length,p=t.call(h,h&&h.__data__,c,i),g=p.length,m=s[c]=new Array(g),v=l[c]=new Array(g);r(h,f,m,v,u[c]=new Array(d),p,e);for(var y,b,_=0,x=0;_<g;++_)if(y=m[_]){for(x<=_&&(x=_+1);!(b=v[x])&&++x<g;);y._next=b||null}}return(l=new F(l,i))._enter=s,l._exit=u,l},enter:function(){return new F(this._enter||this._groups.map(t),this._parents)},exit:function(){return new F(this._exit||this._groups.map(t),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),l=0;l<o;++l)for(var s,u=e[l],c=n[l],h=u.length,f=a[l]=new Array(h),d=0;d<h;++d)(s=u[d]||c[d])&&(f[d]=s);for(;l<r;++l)a[l]=e[l];return new F(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];0<=--o;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n||(n=d);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,l=e[o],s=l.length,u=i[o]=new Array(s),c=0;c<s;++c)(a=l[c])&&(u[c]=a);u.sort(t)}return new F(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,l=o.length;a<l;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=o(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,n,r){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,r)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):(r=this.node(),i=t,r.style.getPropertyValue(i)||a(r).getComputedStyle(r,null).getPropertyValue(i));var r,i},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=s(t+"");if(arguments.length<2){for(var r=u(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?c:m)(this,t)}}:e?function(t){return function(){c(this,t)}}:function(t){return function(){m(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?v:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?y:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(b)},lower:function(){return this.each(_)},append:function(t){var e="function"==typeof t?t:l(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:l(t),r=null==e?x:"function"==typeof e?e:h(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(k)},clone:function(t){return this.select(t?N:C)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),a=o.length;if(!(arguments.length<2)){for(l=e?S:T,null==n&&(n=!1),r=0;r<a;++r)this.each(l(o[r],e,n));return this}var l=this.node().__on;if(l)for(var s,u=0,c=l.length;u<c;++u)for(r=0,s=l[u];r<a;++r)if((i=o[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return R(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return R(this,t,e)}})(t,e))}};var D=/^(allowReorder|attributeName|attributeType|autoReverse|baseFrequency|baseProfile|calcMode|clipPathUnits|contentScriptType|contentStyleType|diffuseConstant|edgeMode|externalResourcesRequired|filterRes|filterUnits|glyphRef|gradientTransform|gradientUnits|kernelMatrix|kernelUnitLength|keyPoints|keySplines|keyTimes|lengthAdjust|limitingConeAngle|markerHeight|markerUnits|markerWidth|maskContentUnits|maskUnits|numOctaves|pathLength|patternContentUnits|patternTransform|patternUnits|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|referrerPolicy|refX|refY|repeatCount|repeatDur|requiredExtensions|requiredFeatures|specularConstant|specularExponent|spreadMethod|startOffset|stdDeviation|stitchTiles|surfaceScale|systemLanguage|tableValues|targetX|targetY|textLength|viewBox|viewTarget|xChannelSelector|yChannelSelector|zoomAndPan)$/;var j="$";function I(){}function $(t,e){var n=new I;if(t instanceof I)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}function q(){}I.prototype=$.prototype={constructor:I,has:function(t){return j+t in this},get:function(t){return this[j+t]},set:function(t,e){return this[j+t]=e,this},remove:function(t){var e=j+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===j&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===j&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===j&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===j&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===j&&++t;return t},empty:function(){for(var t in this)if(t[0]===j)return!1;return!0},each:function(t){for(var e in this)e[0]===j&&t(this[e],e.slice(1),this)}};var K=$.prototype;q.prototype=function(t,e){var n=new q;if(t instanceof q)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}.prototype={constructor:q,has:K.has,add:function(t){return this[j+(t+="")]=t,this},remove:K.remove,clear:K.clear,values:K.keys,size:K.size,empty:K.empty,each:K.each},L.prototype.translate=function(r,i){var t=this.node();return t?t.getBBox?this.attr("transform",function(t,e){var n="function"==typeof r?r.call(this,t,e):r;return 0===i?n=[n,0]:1===i&&(n=[0,n]),"translate("+n[0]+","+n[1]+")"}):this.style("transform",function(t,e){var n="function"==typeof r?r.call(this,t,e):r;return 0===i?n=[n,0]:1===i&&(n=[0,n]),"translate("+n[0]+"px,"+n[1]+"px)"}):this},L.prototype.append=function(t){var e,n;e="function"==typeof t?t:l((n=z(t)).tag);var r=this.select(function(){return this.appendChild(e.apply(this,arguments))});if(n)for(var i in n.attr)r.attr(i,n.attr[i]);return r},L.prototype.insert=function(t,e){var n=z(t),r=l(n.tag),i=null==e?O:"function"==typeof e?e:h(e),o=this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)});for(var a in n.attr)o.attr(a,n.attr[a]);return o},L.prototype.parent=function(){var t=[];return this.filter(function(){return!(-1<t.indexOf(this.parentNode)||(t.push(this.parentNode),0))}).select(function(){return this.parentNode})},L.prototype.selectAppend=function(t){var e,n=h(t),r=z(t);for(var i in t=l(r.tag),e=this.select(function(){return n.apply(this,arguments)||this.appendChild(t.apply(this,arguments))}),r.attr)e.attr(i,r.attr[i]);return e},L.prototype.tspans=function(t,n){return this.selectAll("tspan").data(function(e){return("function"==typeof t?t(e):t).map(function(t){return{line:t,parent:e}})}).enter().append("tspan").text(function(t){return t.line}).attr("x",0).attr("dy",function(t,e){return e?("function"==typeof n?n(t.parent,t.line,e):n)||15:0})},L.prototype.appendMany=function(t,e){if("string"==typeof e){console.warn("DEPRECATED: jetpack's appendMany order of arguments has changed. It's appendMany('div', data) from now on");var n=e;e=t,t=n}return this.selectAll(null).data(e).enter().append(t)},L.prototype.at=function(t,e){if("object"!=typeof t)return 1==arguments.length?this.attr(t):this.attr(t,e);for(var n in t)this.attr(D.test(n)?n:n.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase(),t[n]);return this},L.prototype.st=function(t,e){if("object"!=typeof t)return 1==arguments.length?this.style(t):r(this,t,e);for(var n in t)r(this,n,t[n]);return this;function r(t,e,n){var r;return e=e.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase(),~"top left bottom right padding-top padding-left padding-bottom padding-right border-top b-width border-left-width border-botto-width m border-right-width  margin-top margin-left margin-bottom margin-right font-size width height stroke-width line-height margin padding border border-radius max-width min-width".indexOf(e)?t.style(e,"function"==typeof n?(r=n,function(){var t=r.apply(this,arguments);return i(t)}):i(n)):t.style(e,n),t}function i(t){return t.match?t:t+"px"}},L.prototype.prop=L.prototype.property;var H={enabled:!1,type:"total",total_text:null,single_selected_row:0},wt={base_color:0,"custom-colors":{},pie_size:{inside_labels:75,outside_labels:50},donut_hole_size:50,slice_order:"descending","value-label-format":"0,0.[00]",show_percent:!1,donut_center_label:H,label_text_slices:!0,label_values_slices:!0,inside_labels:{enabled:!0},outside_labels:{enabled:!1,edge:!1,color:!1},color_key:{enabled:!0,position:"top",stack:!1,label_values:!1},group:{num_slices:5,text:null},small_multiples:{min_col_grid_width:120,group_value_label:H},rotation_angle:0},Mt=Object.prototype.toString;function kt(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),!e)return t;for(var r=e.split("."),i=t,o=0;o<r.length&&null!=i;o++)i=i[r[o]];return null==i?n:i}function U(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function W(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function V(){}var Z=1/.7,X="\\s*([+-]?\\d+)\\s*",Y="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",G="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Q=/^#([0-9a-f]{3})$/,J=/^#([0-9a-f]{6})$/,tt=new RegExp("^rgb\\("+[X,X,X]+"\\)$"),et=new RegExp("^rgb\\("+[G,G,G]+"\\)$"),nt=new RegExp("^rgba\\("+[X,X,X,Y]+"\\)$"),rt=new RegExp("^rgba\\("+[G,G,G,Y]+"\\)$"),it=new RegExp("^hsl\\("+[Y,G,G]+"\\)$"),ot=new RegExp("^hsla\\("+[Y,G,G,Y]+"\\)$"),at={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function lt(t){var e;return t=(t+"").trim().toLowerCase(),(e=Q.exec(t))?new ft((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=J.exec(t))?st(parseInt(e[1],16)):(e=tt.exec(t))?new ft(e[1],e[2],e[3],1):(e=et.exec(t))?new ft(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=nt.exec(t))?ut(e[1],e[2],e[3],e[4]):(e=rt.exec(t))?ut(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=it.exec(t))?pt(e[1],e[2]/100,e[3]/100,1):(e=ot.exec(t))?pt(e[1],e[2]/100,e[3]/100,e[4]):at.hasOwnProperty(t)?st(at[t]):"transparent"===t?new ft(NaN,NaN,NaN,0):null}function st(t){return new ft(t>>16&255,t>>8&255,255&t,1)}function ut(t,e,n,r){return r<=0&&(t=e=n=NaN),new ft(t,e,n,r)}function ct(t){return t instanceof V||(t=lt(t)),t?new ft((t=t.rgb()).r,t.g,t.b,t.opacity):new ft}function ht(t,e,n,r){return 1===arguments.length?ct(t):new ft(t,e,n,null==r?1:r)}function ft(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function dt(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function pt(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new gt(t,e,n,r)}function gt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function mt(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}U(V,lt,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),U(ft,ht,W(V,{brighter:function(t){return t=null==t?Z:Math.pow(Z,t),new ft(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ft(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+dt(this.r)+dt(this.g)+dt(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),U(gt,function(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof gt)return new gt(t.h,t.s,t.l,t.opacity);if(t instanceof V||(t=lt(t)),!t)return new gt;if(t instanceof gt)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,l=o-i,s=(o+i)/2;return l?(a=e===o?(n-r)/l+6*(n<r):n===o?(r-e)/l+2:(e-n)/l+4,l/=s<.5?o+i:2-o-i,a*=60):l=0<s&&s<1?0:a,new gt(a,l,s,t.opacity)}(t):new gt(t,e,n,null==r?1:r)},W(V,{brighter:function(t){return t=null==t?Z:Math.pow(Z,t),new gt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new gt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ft(mt(240<=t?t-240:t+120,i,r),mt(t,i,r),mt(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var vt=Math.PI/180,yt=180/Math.PI,bt=.96422,_t=1,Ct=.82521,Nt=4/29,At=6/29,Et=3*At*At,Bt=At*At*At;function Tt(t){if(t instanceof Rt)return new Rt(t.l,t.a,t.b,t.opacity);if(t instanceof Ot){if(isNaN(t.h))return new Rt(t.l,0,0,t.opacity);var e=t.h*vt;return new Rt(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof ft||(t=ct(t));var n,r,i=zt(t.r),o=zt(t.g),a=zt(t.b),l=Pt((.2225045*i+.7168786*o+.0606169*a)/_t);return i===o&&o===a?n=r=l:(n=Pt((.4360747*i+.3850649*o+.1430804*a)/bt),r=Pt((.0139322*i+.0971045*o+.7141733*a)/Ct)),new Rt(116*l-16,500*(n-l),200*(l-r),t.opacity)}function St(t,e,n,r){return 1===arguments.length?Tt(t):new Rt(t,e,n,null==r?1:r)}function Rt(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Pt(t){return Bt<t?Math.pow(t,1/3):t/Et+Nt}function Ft(t){return At<t?t*t*t:Et*(t-Nt)}function Lt(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function zt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ot(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}U(Rt,St,W(V,{brighter:function(t){return new Rt(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Rt(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new ft(Lt(3.1338561*(e=bt*Ft(e))-1.6168667*(t=_t*Ft(t))-.4906146*(n=Ct*Ft(n))),Lt(-.9787684*e+1.9161415*t+.033454*n),Lt(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),U(Ot,function(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof Ot)return new Ot(t.h,t.c,t.l,t.opacity);if(t instanceof Rt||(t=Tt(t)),0===t.a&&0===t.b)return new Ot(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*yt;return new Ot(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Ot(t,e,n,null==r?1:r)},W(V,{brighter:function(t){return new Ot(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Ot(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Tt(this).rgb()}}));var Dt=1.78277,jt=-.29227,It=-.90649,$t=1.97294,qt=$t*It,Kt=$t*Dt,Ht=Dt*jt- -.14861*It;function Ut(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Wt(t){return function(){return t}}function Vt(o){return 1==(o=+o)?Zt:function(t,e){return e-t?(n=t,r=e,i=o,n=Math.pow(n,i),r=Math.pow(r,i)-n,i=1/i,function(t){return Math.pow(n+t*r,i)}):Wt(isNaN(t)?e:t);var n,r,i}}function Zt(t,e){var n,r,i=e-t;return i?(n=t,r=i,function(t){return n+t*r}):Wt(isNaN(t)?e:t)}U(Ut,function(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof Ut)return new Ut(t.h,t.s,t.l,t.opacity);t instanceof ft||(t=ct(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Ht*r+qt*e-Kt*n)/(Ht+qt-Kt),o=r-i,a=($t*(n-i)-jt*o)/It,l=Math.sqrt(a*a+o*o)/($t*i*(1-i)),s=l?Math.atan2(a,o)*yt-120:NaN;return new Ut(s<0?s+360:s,l,i,t.opacity)}(t):new Ut(t,e,n,null==r?1:r)},W(V,{brighter:function(t){return t=null==t?Z:Math.pow(Z,t),new Ut(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ut(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*vt,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new ft(255*(e+n*(-.14861*r+Dt*i)),255*(e+n*(jt*r+It*i)),255*(e+n*($t*r)),this.opacity)}}));var Xt=function t(e){var a=Vt(e);function n(e,t){var n=a((e=ht(e)).r,(t=ht(t)).r),r=a(e.g,t.g),i=a(e.b,t.b),o=Zt(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=r(t),e.b=i(t),e.opacity=o(t),e+""}}return n.gamma=t,n}(1);function Yt(e,n){return n-=e=+e,function(t){return e+n*t}}var Gt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qt=new RegExp(Gt.source,"g");function Jt(t,e){var n,r=typeof e;return null==e||"boolean"===r?Wt(e):("number"===r?Yt:"string"===r?(n=lt(e))?(e=n,Xt):function(t,r){var e,n,i,o,a,l=Gt.lastIndex=Qt.lastIndex=0,s=-1,u=[],c=[];for(t+="",r+="";(e=Gt.exec(t))&&(n=Qt.exec(r));)(i=n.index)>l&&(i=r.slice(l,i),u[s]?u[s]+=i:u[++s]=i),(e=e[0])===(n=n[0])?u[s]?u[s]+=n:u[++s]=n:(u[++s]=null,c.push({i:s,x:Yt(e,n)})),l=Qt.lastIndex;return l<r.length&&(i=r.slice(l),u[s]?u[s]+=i:u[++s]=i),u.length<2?c[0]?(a=c[0].x,function(t){return a(t)+""}):(o=r,function(){return o}):(r=c.length,function(t){for(var e,n=0;n<r;++n)u[(e=c[n]).i]=e.x(t);return u.join("")})}:e instanceof lt?Xt:e instanceof Date?function(e,n){var r=new Date;return n-=e=+e,function(t){return r.setTime(e+n*t),r}}:Array.isArray(e)?function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Jt(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Jt(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}:Yt)(t,e)}Math.PI,Math.SQRT2;function te(t,e,n,r){var i=St(t),o=n?[Math.min(i.l,r[0]),Math.max(i.l,r[1])]:r,a=o[0],l=o[1],s=1===e?[i.l]:function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}(Jt(a,l),e);if(n&&!s.includes(i.l)){var u=s.reduce(function(t,e){return Math.abs(t)>Math.abs(i.l-e)?i.l-e:t},100);s=s.map(function(t){return t+u})}return(s=s.map(function(t){return St(t,i.a,i.b)})).map(function(t){return t.hex()})}function ee(t,e){void 0===t&&(t=new Error("cant create getColor function without theme")),void 0===e&&(e={});var o=e.selectedColor;void 0===o&&(o=0);var n=e.customColors;void 0===n&&(n={});var r=e.keys;void 0===r&&(r=[]);var i=e.permute,a=e.includeBaseColor;void 0===a&&(a=!0);var l=e.lightnessRange;void 0===l&&(l=[30,90]);var s=e.positiveColor;void 0===s&&(s=!1);var u=e.negativeColor;void 0===u&&(u=!1);var c=e.neutralColor;void 0===c&&(c=!1);var h=t.colors.palette;o=isNaN(o)?o:h[o%h.length];var f=r.length-Object.keys(n).filter(function(t){return""!==n[t].toString()&&r.includes(t)}).length,d=[];if(n&&Object.keys(n).length){var p={};Object.keys(n).forEach(function(t){String(n[t]).length&&(p[t]=isNaN(n[t])?n[t]:h[n[t]])}),Object.keys(p).length&&d.push(ne(p))}(s||u||c)&&d.push(re(s?t.colors.positive:o,u?t.colors.negative:o,c?t.colors.neutral:s?t.colors.positive:o));var g=t.colors.mode;if(g&&0<f&&(g.rotateLimit>=f?d.push(ie(h,o)):g.shades&&g.shades[o]&&d.push(oe(g.shades[o],f))),0<f){i=void 0===i?4<f:i;var m=te(o,f,a,l=f<=3?[30,60]:l);i&&(m=function(t){t.reverse();var e=t.length;if(e<3)return t.slice(0);for(var n=0,r=-2,i=[],o={},a=Math.ceil(e/2.5);!o[n%=e]&&(e<5||1<Math.abs(r-n))?(i.push(t[n]),o[n]=!0,r=n,n+=a):n+=1,i.length<e;);return i}(m)),d.push(ae(m))}return function(e,n,r){var i=null;return d.find(function(t){return null!=(i=t({key:e,i:n,value:r}))}),null==i&&(i=o),i}}var ne=function(e){return function(t){return e.hasOwnProperty(t.key)?e[String(t.key)]:null}},re=function(e,n,r){return function(t){return 0<t.value?e:t.value<0?n:r}},ie=function(e,n){return function(t){return e[(Math.max(0,e.indexOf(n))+t.i)%e.length]}},oe=function(e,r){return function(t){if("string"==typeof e[0])return e[t.i%e.length];e.sort(function(t,e){return t.length-e.length});var n=e.length-1;return e.forEach(function(t,e){r>(t[e-1]||[]).length&&r<=t.length&&(n=e)}),e[n][t.i%e[n].length]}},ae=function(e){var n=0,r=[];return function(t){return r[t.i]?r[t.i]:n!==e.length?r[t.i]=e[n++]:null}};function le(t){return St(t).l<75}function se(t,e,n){var r={top:0,right:0,bottom:0,left:0};e&&(r.left="left"===e.colorKeyPosition?e.colorKeyWidth:r.left,r.right="right"===e.colorKeyPosition?e.colorKeyWidth:r.right,r.top="top"===e.colorKeyPosition?e.colorKeyHeight:r.top,r.bottom="bottom"===e.colorKeyPosition?e.colorKeyHeight:r.bottom),t.st({width:"calc(100% - "+(r.right+r.left)+"px)",margin:r.top+"px "+r.right+"px "+r.bottom+"px "+r.left+"px"});var i=n.getElementBounds(t.node());return{width:Math.ceil(i.width)}}function ue(t){var e,n,r,i,o,a=t.valueColumns,l=t.width,s=t.definedWidthFactor,u=t.chartContainer,c=t.config,h=t.fitChart,f=(e=a,n=l,r=c.small_multiples.min_col_grid_width||120,i=Math.floor(n/r)||1,o=Math.ceil(e.length/i),i>e.length?{cols:e.length,rows:1}:{cols:i,rows:o}),d=10*(f.cols-1),p=Math.floor((l-d)/f.cols)*s;h.enabled&&h.pieSizeReduction&&(p-=h.pieSizeReduction/f.rows)<1&&(p=1,h.stopReRender=!0);for(var g=a.map(function(t){return{pieWidth:p}}),m="repeat("+f.cols+", 1fr)",v=[],y=1;y<=f.rows;y++)v.push(y===f.rows?"auto":"1fr");var b=1===f.cols?"repeat("+f.rows+", 'auto')":v.join(" ");return u.st({"grid-template-columns":m,"grid-template-rows":b,"grid-gap":"10px"}),function(t){var e=window.navigator.userAgent;if(/MSIE|Trident/.test(e)){var n=document.getElementById("ie-grid-fallback");n&&(n.outerHTML="");var r=document.createElement("style");r.setAttribute("type","text/css"),r.id="ie-grid-fallback";for(var i=".chart-container {display: -ms-grid; -ms-grid-columns: (1fr)["+t.cols+"]; -ms-grid-rows: (1fr)["+t.rows+"];}",o=1;o<=t.rows;o++)for(var a=1;a<=t.cols;a++)i+=".chart-container .cell:nth-child("+(a+t.cols*(o-1))+") {-ms-grid-row: "+o+"; -ms-grid-column: "+a+";}";r.textContent=i,document.head.appendChild(r)}}(f),g}var ce=("object"!=typeof Int8Array&&"undefined"!=typeof document&&"function"!=typeof document.childNodes?function(t){return"function"==typeof t||!1}:null)||function(t){return"[object Function]"===Mt.call(t)},he=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,fe=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,de="<a><span><b><br><br/><i><strong><sup><sub><strike><u><em><tt>";function pe(t,e){if(null===t)return null;if(void 0!==t){if((t=String(t)).indexOf("<")<0||t.indexOf(">")<0)return t;if(t=function(t,n){n=(((void 0!==n?n||"":de)+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var e=t,r=t;for(;;)if(r=(e=r).replace(fe,"").replace(he,function(t,e){return-1<n.indexOf("<"+e.toLowerCase()+">")?t:""}),e===r)return r}(t,e),"undefined"==typeof document)return t;var n=document.createElement("div");n.innerHTML=t;for(var r=n.querySelectorAll("*"),i=0;i<r.length;i++){"a"===r[i].nodeName.toLowerCase()&&("_self"!==r[i].getAttribute("target")&&r[i].setAttribute("target","_blank"),r[i].setAttribute("rel","nofollow noopener noreferrer"),r[i].getAttribute("href")&&r[i].getAttribute("href").trim().replace(/[^a-zA-Z0-9 -:]/g,"").startsWith("javascript:")&&r[i].setAttribute("href",""));for(var o=[],a=0;a<r[i].attributes.length;a++){var l=r[i].attributes[a];l.specified&&"on"===l.name.substr(0,2)&&o.push(l.name)}o.forEach(function(t){return r[i].removeAttribute(t)})}return n.innerHTML}}function ge(i,t,o,a){t.on("mouseover",function(t){var e=ce(o)?o(t):o,n=ce(a)?a(t):a,r=pe(e,"");i.set(r,n)})}function me(t,e,n,r,i){void 0===i&&(i=!1);var o=pe(e,"");return i&&(t=r.group.num_slices-1),n.autoColor(o,t)+""}var ve="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var ye,be=(function(t){var e,n;e=ve,n=function(){var y,o,s,u,t,l={},b={},e={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},c={currentLocale:e.currentLocale,zeroFormat:e.zeroFormat,nullFormat:e.nullFormat,defaultFormat:e.defaultFormat,scalePercentBy100:e.scalePercentBy100};function a(t,e){this._input=t,this._value=e}return(y=function(t){var e,n,r,i;if(y.isNumeral(t))e=t.value();else if(0===t||void 0===t)e=0;else if(null===t||o.isNaN(t))e=null;else if("string"==typeof t)if(c.zeroFormat&&t===c.zeroFormat)e=0;else if(c.nullFormat&&t===c.nullFormat||!t.replace(/[^0-9]+/g,"").length)e=null;else{for(n in l)if((i="function"==typeof l[n].regexps.unformat?l[n].regexps.unformat():l[n].regexps.unformat)&&t.match(i)){r=l[n].unformat;break}e=(r=r||y._.stringToNumber)(t)}else e=Number(t)||null;return new a(t,e)}).version="2.0.6",y.isNumeral=function(t){return t instanceof a},y._=o={numberToFormat:function(t,e,n){var r,i,o,a,l,s,u,c,h=b[y.options.currentLocale],f=!1,d=!1,p="",g="",m=!1;if(t=t||0,o=Math.abs(t),y._.includes(e,"(")?(f=!0,e=e.replace(/[\(|\)]/g,"")):(y._.includes(e,"+")||y._.includes(e,"-"))&&(s=y._.includes(e,"+")?e.indexOf("+"):t<0?e.indexOf("-"):-1,e=e.replace(/[\+|\-]/g,"")),y._.includes(e,"a")&&(i=!!(i=e.match(/a(k|m|b|t)?/))&&i[1],y._.includes(e," a")&&(p=" "),e=e.replace(new RegExp(p+"a[kmbt]?"),""),1e12<=o&&!i||"t"===i?(p+=h.abbreviations.trillion,t/=1e12):o<1e12&&1e9<=o&&!i||"b"===i?(p+=h.abbreviations.billion,t/=1e9):o<1e9&&1e6<=o&&!i||"m"===i?(p+=h.abbreviations.million,t/=1e6):(o<1e6&&1e3<=o&&!i||"k"===i)&&(p+=h.abbreviations.thousand,t/=1e3)),y._.includes(e,"[.]")&&(d=!0,e=e.replace("[.]",".")),a=t.toString().split(".")[0],l=e.split(".")[1],u=e.indexOf(","),r=(e.split(".")[0].split(",")[0].match(/0/g)||[]).length,l?(a=(g=y._.includes(l,"[")?(l=(l=l.replace("]","")).split("["),y._.toFixed(t,l[0].length+l[1].length,n,l[1].length)):y._.toFixed(t,l.length,n)).split(".")[0],g=y._.includes(g,".")?h.delimiters.decimal+g.split(".")[1]:"",d&&0===Number(g.slice(1))&&(g="")):a=y._.toFixed(t,0,n),p&&!i&&1e3<=Number(a)&&p!==h.abbreviations.trillion)switch(a=String(Number(a)/1e3),p){case h.abbreviations.thousand:p=h.abbreviations.million;break;case h.abbreviations.million:p=h.abbreviations.billion;break;case h.abbreviations.billion:p=h.abbreviations.trillion}if(y._.includes(a,"-")&&(a=a.slice(1),m=!0),a.length<r)for(var v=r-a.length;0<v;v--)a="0"+a;return-1<u&&(a=a.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+h.delimiters.thousands)),0===e.indexOf(".")&&(a=""),c=a+g+(p||""),f?c=(f&&m?"(":"")+c+(f&&m?")":""):0<=s?c=0===s?(m?"-":"+")+c:c+(m?"-":"+"):m&&(c="-"+c),c},stringToNumber:function(t){var e,n,r,i=b[c.currentLocale],o=t,a={thousand:3,million:6,billion:9,trillion:12};if(c.zeroFormat&&t===c.zeroFormat)n=0;else if(c.nullFormat&&t===c.nullFormat||!t.replace(/[^0-9]+/g,"").length)n=null;else{for(e in n=1,"."!==i.delimiters.decimal&&(t=t.replace(/\./g,"").replace(i.delimiters.decimal,".")),a)if(r=new RegExp("[^a-zA-Z]"+i.abbreviations[e]+"(?:\\)|(\\"+i.currency.symbol+")?(?:\\))?)?$"),o.match(r)){n*=Math.pow(10,a[e]);break}n*=(t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1,t=t.replace(/[^0-9\.]+/g,""),n*=Number(t)}return n},isNaN:function(t){return"number"==typeof t&&isNaN(t)},includes:function(t,e){return-1!==t.indexOf(e)},insert:function(t,e,n){return t.slice(0,n)+e+t.slice(n)},reduce:function(t,e){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var n,r=Object(t),i=r.length>>>0,o=0;if(3===arguments.length)n=arguments[2];else{for(;o<i&&!(o in r);)o++;if(i<=o)throw new TypeError("Reduce of empty array with no initial value");n=r[o++]}for(;o<i;o++)o in r&&(n=e(n,r[o],o,r));return n},multiplier:function(t){var e=t.toString().split(".");return e.length<2?1:Math.pow(10,e[1].length)},correctionFactor:function(){return Array.prototype.slice.call(arguments).reduce(function(t,e){var n=o.multiplier(e);return n<t?t:n},1)},toFixed:function(t,e,n,r){var i,o,a,l,s=t.toString().split("."),u=e-(r||0);return i=2===s.length?Math.min(Math.max(s[1].length,u),e):u,a=Math.pow(10,i),l=(n(t+"e+"+i)/a).toFixed(i),e-i<r&&(o=new RegExp("\\.?0{1,"+(r-(e-i))+"}$"),l=l.replace(o,"")),l}},y.options=c,y.formats=l,y.locales=b,y.locale=function(t){return t&&(c.currentLocale=t.toLowerCase()),c.currentLocale},y.localeData=function(t){if(!t)return b[c.currentLocale];if(t=t.toLowerCase(),!b[t])throw new Error("Unknown locale : "+t);return b[t]},y.reset=function(){for(var t in e)c[t]=e[t]},y.zeroFormat=function(t){c.zeroFormat="string"==typeof t?t:null},y.nullFormat=function(t){c.nullFormat="string"==typeof t?t:null},y.defaultFormat=function(t){c.defaultFormat="string"==typeof t?t:"0.0"},y.register=function(t,e,n){if(e=e.toLowerCase(),this[t+"s"][e])throw new TypeError(e+" "+t+" already registered.");return this[t+"s"][e]=n},y.validate=function(t,e){var n,r,i,o,a,l,s,u;if("string"!=typeof t&&(t+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",t)),(t=t.trim()).match(/^\d+$/))return!0;if(""===t)return!1;try{s=y.localeData(e)}catch(t){s=y.localeData(y.locale())}return i=s.currency.symbol,a=s.abbreviations,n=s.delimiters.decimal,r="."===s.delimiters.thousands?"\\.":s.delimiters.thousands,(null===(u=t.match(/^[^\d]+/))||(t=t.substr(1),u[0]===i))&&((null===(u=t.match(/[^\d]+$/))||(t=t.slice(0,-1),u[0]===a.thousand||u[0]===a.million||u[0]===a.billion||u[0]===a.trillion))&&(l=new RegExp(r+"{2}"),!t.match(/[^\d.,]/g)&&(!(2<(o=t.split(n)).length)&&(o.length<2?!!o[0].match(/^\d+.*\d$/)&&!o[0].match(l):1===o[0].length?!!o[0].match(/^\d+$/)&&!o[0].match(l)&&!!o[1].match(/^\d+$/):!!o[0].match(/^\d+.*\d$/)&&!o[0].match(l)&&!!o[1].match(/^\d+$/)))))},y.fn=a.prototype={clone:function(){return y(this)},format:function(t,e){var n,r,i,o=this._value,a=t||c.defaultFormat;if(e=e||Math.round,0===o&&null!==c.zeroFormat)r=c.zeroFormat;else if(null===o&&null!==c.nullFormat)r=c.nullFormat;else{for(n in l)if(a.match(l[n].regexps.format)){i=l[n].format;break}r=(i=i||y._.numberToFormat)(o,a,e)}return r},value:function(){return this._value},input:function(){return this._input},set:function(t){return this._value=Number(t),this},add:function(t){var i=o.correctionFactor.call(null,this._value,t);return this._value=o.reduce([this._value,t],function(t,e,n,r){return t+Math.round(i*e)},0)/i,this},subtract:function(t){var i=o.correctionFactor.call(null,this._value,t);return this._value=o.reduce([t],function(t,e,n,r){return t-Math.round(i*e)},Math.round(this._value*i))/i,this},multiply:function(t){return this._value=o.reduce([this._value,t],function(t,e,n,r){var i=o.correctionFactor(t,e);return Math.round(t*i)*Math.round(e*i)/Math.round(i*i)},1),this},divide:function(t){return this._value=o.reduce([this._value,t],function(t,e,n,r){var i=o.correctionFactor(t,e);return Math.round(t*i)/Math.round(e*i)}),this},difference:function(t){return Math.abs(y(this._value).subtract(t).value())}},y.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$"}}),y.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(t,e,n){var r,i=y._.includes(e," BPS")?" ":"";return t*=1e4,e=e.replace(/\s?BPS/,""),r=y._.numberToFormat(t,e,n),r=y._.includes(r,")")?((r=r.split("")).splice(-1,0,i+"BPS"),r.join("")):r+i+"BPS"},unformat:function(t){return+(1e-4*y._.stringToNumber(t)).toFixed(15)}}),u={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},t="("+(t=(s={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}).suffixes.concat(u.suffixes.filter(function(t){return s.suffixes.indexOf(t)<0})).join("|")).replace("B","B(?!PS)")+")",y.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(t)},format:function(t,e,n){var r,i,o,a=y._.includes(e,"ib")?u:s,l=y._.includes(e," b")||y._.includes(e," ib")?" ":"";for(e=e.replace(/\s?i?b/,""),r=0;r<=a.suffixes.length;r++)if(i=Math.pow(a.base,r),o=Math.pow(a.base,r+1),null===t||0===t||i<=t&&t<o){l+=a.suffixes[r],0<i&&(t/=i);break}return y._.numberToFormat(t,e,n)+l},unformat:function(t){var e,n,r=y._.stringToNumber(t);if(r){for(e=s.suffixes.length-1;0<=e;e--){if(y._.includes(t,s.suffixes[e])){n=Math.pow(s.base,e);break}if(y._.includes(t,u.suffixes[e])){n=Math.pow(u.base,e);break}}r*=n||1}return r}}),y.register("format","currency",{regexps:{format:/(\$)/},format:function(t,e,n){var r,i,o=y.locales[y.options.currentLocale],a={before:e.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:e.match(/([\+|\-|\)|\s|\$]*)$/)[0]};for(e=e.replace(/\s?\$\s?/,""),r=y._.numberToFormat(t,e,n),0<=t?(a.before=a.before.replace(/[\-\(]/,""),a.after=a.after.replace(/[\-\)]/,"")):t<0&&!y._.includes(a.before,"-")&&!y._.includes(a.before,"(")&&(a.before="-"+a.before),i=0;i<a.before.length;i++)switch(a.before[i]){case"$":r=y._.insert(r,o.currency.symbol,i);break;case" ":r=y._.insert(r," ",i+o.currency.symbol.length-1)}for(i=a.after.length-1;0<=i;i--)switch(a.after[i]){case"$":r=i===a.after.length-1?r+o.currency.symbol:y._.insert(r,o.currency.symbol,-(a.after.length-(1+i)));break;case" ":r=i===a.after.length-1?r+" ":y._.insert(r," ",-(a.after.length-(1+i)+o.currency.symbol.length-1))}return r}}),y.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(t,e,n){var r=("number"!=typeof t||y._.isNaN(t)?"0e+0":t.toExponential()).split("e");return e=e.replace(/e[\+|\-]{1}0/,""),y._.numberToFormat(Number(r[0]),e,n)+"e"+r[1]},unformat:function(t){var e=y._.includes(t,"e+")?t.split("e+"):t.split("e-"),n=Number(e[0]),r=Number(e[1]);return r=y._.includes(t,"e-")?r*=-1:r,y._.reduce([n,Math.pow(10,r)],function(t,e,n,r){var i=y._.correctionFactor(t,e);return t*i*(e*i)/(i*i)},1)}}),y.register("format","ordinal",{regexps:{format:/(o)/},format:function(t,e,n){var r=y.locales[y.options.currentLocale],i=y._.includes(e," o")?" ":"";return e=e.replace(/\s?o/,""),i+=r.ordinal(t),y._.numberToFormat(t,e,n)+i}}),y.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(t,e,n){var r,i=y._.includes(e," %")?" ":"";return y.options.scalePercentBy100&&(t*=100),e=e.replace(/\s?\%/,""),r=y._.numberToFormat(t,e,n),r=y._.includes(r,")")?((r=r.split("")).splice(-1,0,i+"%"),r.join("")):r+i+"%"},unformat:function(t){var e=y._.stringToNumber(t);return y.options.scalePercentBy100?.01*e:e}}),y.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(t,e,n){var r=Math.floor(t/60/60),i=Math.floor((t-60*r*60)/60),o=Math.round(t-60*r*60-60*i);return r+":"+(i<10?"0"+i:i)+":"+(o<10?"0"+o:o)},unformat:function(t){var e=t.split(":"),n=0;return 3===e.length?(n+=60*Number(e[0])*60,n+=60*Number(e[1]),n+=Number(e[2])):2===e.length&&(n+=60*Number(e[0]),n+=Number(e[1])),Number(n)}}),y},t.exports?t.exports=n():e.numeral=n()}(ye={exports:{}},ye.exports),ye.exports);function _e(t){return t}function xe(t){var r=t.config,e=t.valueColumn,n=t.chart,i=t.showTotal;if(void 0===i&&(i=!1),!e)return _e;var o=n.get("metadata.data.column-format",{})[e.name()]||{},a=o["number-append"]||"",l=o["number-prepend"]||"",s="number"===e.type()?function(t){if(isNaN(t)||null===t)return"";var e=r["value-label-format"]||"1,000.[00]";if(r.show_percent&&!i)return be(.01*t).format(-1<e.indexOf("%")?e:t<5?"0.[0]%":"0%");var n=be(e.includes("%")?.01*t:t).format(e);return""+l+n+a}:_e;return function(t){return s(t,!0)}}var we=Math.PI,Me=2*we,ke=1e-6,Ce=Me-ke;function Ne(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ae(){return new Ne}function Ee(t){return function(){return t}}Ne.prototype=Ae.prototype={constructor:Ne,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,l=n-t,s=r-e,u=o-t,c=a-e,h=u*u+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(ke<h)if(Math.abs(c*l-s*u)>ke&&i){var f=n-o,d=r-a,p=l*l+s*s,g=f*f+d*d,m=Math.sqrt(p),v=Math.sqrt(h),y=i*Math.tan((we-Math.acos((p+h-g)/(2*m*v)))/2),b=y/v,_=y/m;Math.abs(b-1)>ke&&(this._+="L"+(t+b*u)+","+(e+b*c)),this._+="A"+i+","+i+",0,0,"+ +(u*d<c*f)+","+(this._x1=t+_*l)+","+(this._y1=e+_*s)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e;var a=(n=+n)*Math.cos(r),l=n*Math.sin(r),s=t+a,u=e+l,c=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+u:(Math.abs(this._x1-s)>ke||Math.abs(this._y1-u)>ke)&&(this._+="L"+s+","+u),n&&(h<0&&(h=h%Me+Me),Ce<h?this._+="A"+n+","+n+",0,1,"+c+","+(t-a)+","+(e-l)+"A"+n+","+n+",0,1,"+c+","+(this._x1=s)+","+(this._y1=u):ke<h&&(this._+="A"+n+","+n+",0,"+ +(we<=h)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Be=Math.abs,Te=Math.atan2,Se=Math.cos,Re=Math.max,Pe=Math.min,Fe=Math.sin,Le=Math.sqrt,ze=1e-12,Oe=Math.PI,De=Oe/2,je=2*Oe;function Ie(t){return 1<=t?De:t<=-1?-De:Math.asin(t)}function $e(t){return t.innerRadius}function qe(t){return t.outerRadius}function Ke(t){return t.startAngle}function He(t){return t.endAngle}function Ue(t){return t&&t.padAngle}function We(t,e,n,r,i,o,a){var l=t-n,s=e-r,u=(a?o:-o)/Le(l*l+s*s),c=u*s,h=-u*l,f=t+c,d=e+h,p=n+c,g=r+h,m=(f+p)/2,v=(d+g)/2,y=p-f,b=g-d,_=y*y+b*b,x=i-o,w=f*g-p*d,M=(b<0?-1:1)*Le(Re(0,x*x*_-w*w)),k=(w*b-y*M)/_,C=(-w*y-b*M)/_,N=(w*b+y*M)/_,A=(-w*y+b*M)/_,E=k-m,B=C-v,T=N-m,S=A-v;return T*T+S*S<E*E+B*B&&(k=N,C=A),{cx:k,cy:C,x01:-c,y01:-h,x11:k*(i/x-1),y11:C*(i/x-1)}}function Ve(){var j=$e,I=qe,$=Ee(0),q=null,K=Ke,H=He,U=Ue,W=null;function e(){var t,e,n,r=+j.apply(this,arguments),i=+I.apply(this,arguments),o=K.apply(this,arguments)-De,a=H.apply(this,arguments)-De,l=Be(a-o),s=o<a;if(W||(W=t=Ae()),i<r&&(e=i,i=r,r=e),ze<i)if(je-ze<l)W.moveTo(i*Se(o),i*Fe(o)),W.arc(0,0,i,o,a,!s),ze<r&&(W.moveTo(r*Se(a),r*Fe(a)),W.arc(0,0,r,a,o,s));else{var u,c,h=o,f=a,d=o,p=a,g=l,m=l,v=U.apply(this,arguments)/2,y=ze<v&&(q?+q.apply(this,arguments):Le(r*r+i*i)),b=Pe(Be(i-r)/2,+$.apply(this,arguments)),_=b,x=b;if(ze<y){var w=Ie(y/r*Fe(v)),M=Ie(y/i*Fe(v));(g-=2*w)>ze?(d+=w*=s?1:-1,p-=w):(g=0,d=p=(o+a)/2),(m-=2*M)>ze?(h+=M*=s?1:-1,f-=M):(m=0,h=f=(o+a)/2)}var k=i*Se(h),C=i*Fe(h),N=r*Se(p),A=r*Fe(p);if(ze<b){var E,B=i*Se(f),T=i*Fe(f),S=r*Se(d),R=r*Fe(d);if(l<Oe&&(E=function(t,e,n,r,i,o,a,l){var s=n-t,u=r-e,c=a-i,h=l-o,f=h*s-c*u;if(!(f*f<ze))return[t+(f=(c*(e-o)-h*(t-i))/f)*s,e+f*u]}(k,C,S,R,B,T,N,A))){var P=k-E[0],F=C-E[1],L=B-E[0],z=T-E[1],O=1/Fe((1<(n=(P*L+F*z)/(Le(P*P+F*F)*Le(L*L+z*z)))?0:n<-1?Oe:Math.acos(n))/2),D=Le(E[0]*E[0]+E[1]*E[1]);_=Pe(b,(r-D)/(O-1)),x=Pe(b,(i-D)/(O+1))}}ze<m?ze<x?(u=We(S,R,k,C,i,x,s),c=We(B,T,N,A,i,x,s),W.moveTo(u.cx+u.x01,u.cy+u.y01),x<b?W.arc(u.cx,u.cy,x,Te(u.y01,u.x01),Te(c.y01,c.x01),!s):(W.arc(u.cx,u.cy,x,Te(u.y01,u.x01),Te(u.y11,u.x11),!s),W.arc(0,0,i,Te(u.cy+u.y11,u.cx+u.x11),Te(c.cy+c.y11,c.cx+c.x11),!s),W.arc(c.cx,c.cy,x,Te(c.y11,c.x11),Te(c.y01,c.x01),!s))):(W.moveTo(k,C),W.arc(0,0,i,h,f,!s)):W.moveTo(k,C),ze<r&&ze<g?ze<_?(u=We(N,A,B,T,r,-_,s),c=We(k,C,S,R,r,-_,s),W.lineTo(u.cx+u.x01,u.cy+u.y01),_<b?W.arc(u.cx,u.cy,_,Te(u.y01,u.x01),Te(c.y01,c.x01),!s):(W.arc(u.cx,u.cy,_,Te(u.y01,u.x01),Te(u.y11,u.x11),!s),W.arc(0,0,r,Te(u.cy+u.y11,u.cx+u.x11),Te(c.cy+c.y11,c.cx+c.x11),s),W.arc(c.cx,c.cy,_,Te(c.y11,c.x11),Te(c.y01,c.x01),!s))):W.arc(0,0,r,p,d,s):W.lineTo(N,A)}else W.moveTo(0,0);if(W.closePath(),t)return W=null,t+""||null}return e.centroid=function(){var t=(+j.apply(this,arguments)+ +I.apply(this,arguments))/2,e=(+K.apply(this,arguments)+ +H.apply(this,arguments))/2-Oe/2;return[Se(e)*t,Fe(e)*t]},e.innerRadius=function(t){return arguments.length?(j="function"==typeof t?t:Ee(+t),e):j},e.outerRadius=function(t){return arguments.length?(I="function"==typeof t?t:Ee(+t),e):I},e.cornerRadius=function(t){return arguments.length?($="function"==typeof t?t:Ee(+t),e):$},e.padRadius=function(t){return arguments.length?(q=null==t?null:"function"==typeof t?t:Ee(+t),e):q},e.startAngle=function(t){return arguments.length?(K="function"==typeof t?t:Ee(+t),e):K},e.endAngle=function(t){return arguments.length?(H="function"==typeof t?t:Ee(+t),e):H},e.padAngle=function(t){return arguments.length?(U="function"==typeof t?t:Ee(+t),e):U},e.context=function(t){return arguments.length?(W=null==t?null:t,e):W},e}function Ze(t,e){return e<t?-1:t<e?1:t<=e?0:NaN}function Xe(t){return t}function Ye(t){return t<0?-1:1}function Ge(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),l=(o*i+a*r)/(r+i);return(Ye(o)+Ye(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(l))||0}function Qe(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Je(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,l=(o-r)/3;t._context.bezierCurveTo(r+l,i+l*e,o-l,a-l*n,o,a)}function tn(t){this._context=t}function en(t){this._context=t}function nn(t,e,n,r,i,o,a,l,s,u,c){var h=s.colorMap(),f=function(){var p=Xe,g=Ze,m=null,v=Ee(0),y=Ee(je),b=Ee(0);function e(n){var t,e,r,i,o,a=n.length,l=0,s=new Array(a),u=new Array(a),c=+v.apply(this,arguments),h=Math.min(je,Math.max(-je,y.apply(this,arguments)-c)),f=Math.min(Math.abs(h)/a,b.apply(this,arguments)),d=f*(h<0?-1:1);for(t=0;t<a;++t)0<(o=u[s[t]=t]=+p(n[t],t,n))&&(l+=o);for(null!=g?s.sort(function(t,e){return g(u[t],u[e])}):null!=m&&s.sort(function(t,e){return m(n[t],n[e])}),t=0,r=l?(h-a*d)/l:0;t<a;++t,c=i)e=s[t],i=c+(0<(o=u[e])?o*r:0)+d,u[e]={data:n[e],index:t,value:o,startAngle:c,endAngle:i,padAngle:f};return u}return e.value=function(t){return arguments.length?(p="function"==typeof t?t:Ee(+t),e):p},e.sortValues=function(t){return arguments.length?(g=t,m=null,e):g},e.sort=function(t){return arguments.length?(m=t,g=null,e):m},e.startAngle=function(t){return arguments.length?(v="function"==typeof t?t:Ee(+t),e):v},e.endAngle=function(t){return arguments.length?(y="function"==typeof t?t:Ee(+t),e):y},e.padAngle=function(t){return arguments.length?(b="function"==typeof t?t:Ee(+t),e):b},e}().sort(null).value(function(t){return t[i.name()]}),d=t.selectAll("g.slice").data(f(l)).enter().append("g.slice").classed("highlight-element",function(t){return s.get("highlighted-series",[]).includes(t.data[r.name()])}).classed("hidden",function(t){return 0===t.value}),p=kt(s.__theme,"colors.background");return d.append("path.slice-path").attr("d",n.defaultArc).attr("fill",function(t,e){var n=t.data[r.name()];return h(me(e,n,s,u,n===a))}).style("stroke",function(){if(p&&"transparent"!==p)return p}),ge(c,d,function(t){return t.data[r.name()]},r.name()),d}function rn(t,e,n,r,i){var o="";return o+='<span class="text-label export-text">'+(r.total_text||n.chart().translate("total","chart"))+":</span>",o+='<span class="value-label export-text">'+xe({config:i,valueColumn:t,chart:n.chart(),showTotal:!0})(e[t.name()])+"</span>"}function on(t,e){return e&&le(t)?lt(t).brighter():e||le(t)?t:lt(t).darker()}function an(t,e,n,r,i,o,a,l){var s=i.colorMap(),u=i.chart(),c=t.name();var h,f,d,p="",g=a.single_selected_row,m=r.find(function(t){return t.__rowIndex===g}),v=(h=g,d=n.data().filter(function(t){return t.data.__rowIndex===h})[0],'style="color: '+s(on(me((f=d).index,pe(f.data[c],""),i,o),l))+'"');return p+='<span class="text-label export-text" '+v+">"+m[c]+":</span>",p+='<span class="value-label export-text" '+v+">"+xe({config:o,valueColumn:e,chart:u})(m["__origValue__"+e.name()])+"</span>"}function ln(t,e){var o=function(t){return e.getElementBounds(t.node()).height};return t.selectAll(".label > span").each(function(){var t=xt(this),e=t.text().split(" ");t.text(e[0]);for(var n='<span class="split-line">'+e[0],r=o(t),i=1;i<e.length;i++)t.text(t.text()+" "+e[i]),o(t)>r?(n+='</span><br><span class="split-line">'+e[i],r=o(t)):n+=" "+e[i];n+="</span>",t.html(n)}),t}function sn(t){var e=t.radius,n=t.pieTranslate,r=t.sliceDatum,i=t.elementRect,o=t.pieContainerRect,a=t.ignoreRadiusPadding,l=i.width,s=i.height,u=-(n-(i.left-o.left)),c=n-(i.top-o.top);return[{x:u,y:c},{x:u+l,y:c},{x:u+l,y:c-s},{x:u,y:c-s}].every(function(t){return function(t,e,n,r){var i=Math.atan2(t.x,t.y);i<0&&(i=2*Math.PI+i);var o=3*Math.PI/180,a=Math.sqrt(t.x*t.x+t.y*t.y),l=r?0:.1*n.outer;return i>=e.startAngle-o&&i<=e.endAngle+o&&a>=n.inner+l-3&&a<=n.outer-l+3}(t,r,e,a)})}function un(t){var e=t.label,n=t.labelNode,r=t.labelWidthOriginal,i=t.alignLines,o=t.pieContainerRect,a=t.arcStore,l=t.radius,s=t.sliceDatum,u=t.pieTranslate,c=t.ignoreRadiusPadding,h=t.chart,f=t.isDonut;var d,p=e.html(),g=!1,m={min:40,max:120,step:10},v={min:0,max:.25,step:.0625};m.max=r<m.max?r:m.max,m.min=r<m.min?r:m.min,v.max=f?0:v.max;for(var y=m.max;y>=m.min;y-=m.step){e.st({position:"absolute",width:y});var b=e.selectAll("span").nodes().map(function(t){return h.getElementBounds(t).width}),_=Math.ceil(Math.max.apply(Math,b));_<y&&e.st({width:_});for(var x=h.getElementBounds(n),w=ln(e,h).selectAll(".split-line"),M=v.max;M>=v.min;M-=v.step){var k=a.constructArc(l.outer+(d=M,Math.floor(l.outer*d)),l.inner).centroid(s),C={x:u+k[0]-x.width/2,y:u+k[1]-x.height/2};if(e.translate([C.x,C.y]),i&&i.translateLines(w),!w.nodes().some(function(t){return!sn({radius:l,pieTranslate:u,sliceDatum:s,elementRect:h.getElementBounds(t),pieContainerRect:o,ignoreRadiusPadding:c})})){g=!0;break}if(i&&i.resetLines(w),c&&M===v.max)break}if(g)break;e.html(p)}return g}function cn(t){var e=t.slices,C=t.pieContainer,N=t.radius,A=t.pieTranslate,E=t.arcStore,B=t.labelColumn,T=t.valueColumn,r=t.groupKey,i=t.vis,S=t.config,R=t.smMode,n=t.highlight,P=t.outsideLabelsFallback,F=t.isDonut;if(!P&&S.inside_labels&&!S.inside_labels.enabled)return null;var L=i.get("highlighted-series",[]),z=function(t,e){var n=t.data[B.name()];return le(me(e,n,i,S,n===r))},O=!R&&S.label_text_slices,D=R&&S.inside_labels.enabled||S.label_values_slices;if(!O&&!D)return null;var j=i.chart(),I=xe({config:S,valueColumn:T,chart:j}),$=j.getElementBounds(C.node()),q=1,K=F?E.defaultArc:E.constructArc(N.outer+Math.floor(.25*N.outer),N.inner);e.each(function(t,e){if(0!==t.value){var n="";O&&(n+='<span class="text-label export-text">'+t.data[B.name()]+"</span>"),D&&(O&&(n+="<br>"),n+='<span class="value-label export-text">'+I(t.data[T.name()])+"</span>");var r=C.append("div.label.inside-label").datum(t).classed("invisible",!0).classed("inverted",function(t){return z(t,e)}).classed("highlight-element",function(t){return L.includes(t.data[B.name()])}).html(n);r.classed("inverted")||r.classed("normal",!0);var i,o,a,l,s,u,c=r.node(),h=Math.ceil(j.getElementBounds(c).width),f=!!(o=(i=t).startAngle,a=i.endAngle,l=Math.PI/3,s=5*l,u=[2*l,4*l],o<l&&a<l||u[0]<o&&u[0]<a&&o<u[1]&&a<u[1]||s<o&&s<a)&&function(t,e,n,r,i,o,a,l){var s={x:n.width/2,y:n.height/2},u=i.defaultArc.centroid(t),c={x:r+u[0],y:r+u[1]};function h(t){var e=s.x,n=s.y,r=c.x,i=(c.y-n)/(r-e);return(t-n+i*e)/i}return{getCentralAxisX:h,translateLines:function(t){t.each(function(){var t=l.getElementBounds(this),e=h(t.top-n.top+t.height/2)-t.left-t.width/2+n.left;xt(this).translate(e,0)})},resetLines:function(t){t.each(function(){xt(this).translate(0,0)})}}}(t,0,$,A,E,0,0,j),d=un({label:r,labelNode:c,labelWidthOriginal:h,alignLines:f,pieContainerRect:$,arcStore:E,radius:N,sliceDatum:t,pieTranslate:A,ignoreRadiusPadding:!1,chart:j,isDonut:F})||un({label:r,labelNode:c,labelWidthOriginal:h,alignLines:f,pieContainerRect:$,arcStore:E,radius:N,sliceDatum:t,pieTranslate:A,ignoreRadiusPadding:!0,chart:j,isDonut:F});if(r.classed("invisible",!1),!d&&(r.classed("no-fit",!0),!P&&S.color_key&&!S.color_key.enabled&&!R)){var p='<span class="num dw-circle"><span class="label-inner">'+q+"</span></span>",g="";O&&(g+=p),D&&(g+='<span class="value-label export-text label label-inner">'+I(t.data[T.name()])+"</span>");var m=C.append("div.label.label-group.inside-label.num-label").datum(t).classed("show-in-footer",O).classed("invisible",!0).classed("inverted",function(t){return z(t,e)}).classed("highlight-element",function(t){return L.includes(t.data[B.name()])}).html(g);m.classed("inverted")||m.classed("normal",!0);var v=m.node(),y=j.getElementBounds(v).width,b=j.getElementBounds(v).height,_=K.centroid(t),x={x:A+_[0]-y/2,y:A+_[1]-b/2};if(m.translate([x.x,x.y]),!sn({radius:N,pieTranslate:A,sliceDatum:t,elementRect:j.getElementBounds(v),pieContainerRect:$,ignoreRadiusPadding:!0})&&O){g=p,m.html(g);var w=j.getElementBounds(v).width,M=j.getElementBounds(v).height,k={x:A+_[0]-w/2,y:A+_[1]-M/2};m.translate([k.x,k.y])}m.classed("invisible",!1),q++}}});var o=C.selectAll(".inside-label");return ge(n,o,function(t){return t.data[B.name()]},B.name()),o}function hn(t,e,n,r,i,o){if(1<e.nodes().length){var a=e.filter(function(t){return 0===t.side_index}),l=e.filter(function(t){return 1===t.side_index}),s=o.getElementBounds(a.node()),u=o.getElementBounds(l.node()),c=s.top+s.height+i;if(u.top<c&&c<n){var h="left"===t?"right":"left",f="left"===h?0:r;a.translate([f,0]).classed("left","left"===h);var d=a.datum();d.position.side=h,d.position.x=f,d.position.y=0,e=e.filter(function(t){return 0!==t.side_index})}}return e}function fn(t){t.datum(function(t,e){return t.side_index=e,t})}function dn(t){var e=t.slices,x=t.cell,n=t.pieWidth,r=t.radius,w=t.pieTranslate,i=t.arcStore,k=t.labelColumn,M=t.valueColumn,o=t.groupKey,a=t.chartContainer,l=t.vis,C=t.config,s=t.smMode,N=t.isBgDark,u=t.highlight,c=t.fitChart,h=t.isDonut;if(C.inside_labels&&C.inside_labels.enabled)return null;if(s||!C.outside_labels||!C.outside_labels.enabled)return null;var A=l.colorMap(),E=l.chart(),B=kt(l.theme(),"vis.d3-pies.labels.values.wrapValue",["(",")"]),T=kt(l.theme(),"vis.d3-pies.labels.values.valuesByPie",0),S=function(t,e){var n=t.data[k.name()];return on(me(e,n,l,C,n===o),N)},R=l.get("highlighted-series",[]),P=C.label_values_slices,F=Math.ceil(.1*r.outer),L=r.outer+F;x.st({padding:F+"px 0"});var z=E.getElementBounds(x.node()),O=h?i.defaultArc:i.constructArc(r.outer+.5*r.outer,0),D=i.constructArc(L,0),j=(z.width-n)/2,f=300<z.width?10:0,I=j-F-f,$=z.width-(j-F-f),q={x:z.width/2,y:n/2+F},d=x.append("div.label.outside-label.invisible").html('<span class="text-label export-text">t<span>'),K=E.getElementBounds(d.node()).height/2;d.remove();var H=x.append("svg.line-container");e.each(function(t,e){if(0!==t.value){var n='<span class="text-label export-text">'+t.data[k.name()]+"</span>",r="",i=n;if(P){var o=xe({config:C,valueColumn:M,chart:E});i+=r=' <span class="value-label export-text">'+B[0]+o(t.data[M.name()])+B[1]+"</span>"}var a=A(S(t,e)),l=x.append("div.label.outside-label").datum(t).classed("invisible",!0).classed("light",N).classed("highlight-element",function(t){return R.includes(t.data[k.name()])}).st({position:"absolute",width:I}).style("color",function(){return C.outside_labels.color?a:null}).html(i);l.selectAll("span").style("color",function(){return C.outside_labels.color?a:null});var s=O.centroid(t),u={x:w+s[0]+j,y:w+s[1]+F},c=D.centroid(t),h={x:w+c[0]+j,y:w+c[1]+F},f={x:h.x+(h.x-q.x),y:h.y+(h.y-q.y)},d=Object.assign({},f),p=f.x<q.x?"left":"right",g="left"===p?0:$,m=f.y-K;l.translate([g,m]).classed("left","left"===p);var v=E.getElementBounds(l.node()),y=v.top<z.top,b=v.top+v.height>z.top+z.height,_=!1;if(y||b)m+=y?z.top-v.top:z.top+z.height-(v.top+v.height),l.translate([g,Math.round(m)]),_=!0;t.position={x:g,y:m,width:I,side:p,anchor:f,originalAnchor:d,innerSliceCentroid:u,outerSliceCentroid:h,shifted:_},t.labelContent={value:r,text:n}}});var p=a.selectAll(".outside-label"),g=p.filter(function(t){return"left"===t.position.side}),m=p.filter(function(t){return"right"===t.position.side});[g=g.sort(function(t,e){return e.index-t.index}),m].forEach(function(t){return fn(t)});var v=g.filter(function(t){return 0===t.side_index}).node(),y=m.filter(function(t){return 0===t.side_index}).node(),b=E.getElementBounds(v).top;return[g=hn("left",g,E.getElementBounds(y).top,$,5,E),m=hn("right",m,b,$,5,E)].forEach(function(t){return fn(t)}),[g,m].forEach(function(t){return h=z,f=5,d=E,void(c=t).each(function(t,e){var n=xt(this),r=c.filter(function(t){return t.side_index<=e-1}),i=d.getElementBounds(n.node()),o=i.height,a=i.top-h.top,l=a+o;if(r.empty())t.position.y2=l;else{var s=r.data().map(function(t){return t.position.y2}),u=Math.max.apply(Math,s)+f;if(a<u){if((l=(a=u)+o)>h.height)return t.position.noFit=!0,n.classed("no-fit",!0),void(t.position.y2=0);n.translate([t.position.x,a]),t.position.y=a,t.position.shifted=!0}t.position.y2=l}});var c,h,f,d}),[g,m].forEach(function(t){return function(t,e,n,r){var i=t.nodes().length-1,o=t.filter(function(t){return!t.position.noFit||t.side_index===i});o.datum(function(t,e){return t.label_check_index=e,t});var a=o.nodes().length,l=a-1,s=o.filter(function(t){return t.label_check_index===l}),u=s.datum();if(u.position.noFit&&!(a<3)){var c=o.filter(function(t){return t.label_check_index===l-1}),h=o.filter(function(t){return t.label_check_index===l-2}),f=c.datum();s.classed("no-fit",!1);var d=r.getElementBounds(s.node()),p=e.height-d.height,g=r.getElementBounds(h.node()),m=g.top+g.height-e.top,v=p-r.getElementBounds(c.node()).height-n;m+n<v?(c.translate([f.position.x,v]),s.translate([u.position.x,p]),f.position.y=v,f.position.shifted=!0,u.position.y=p,u.position.noFit=!1,u.position.shifted=!0):s.classed("no-fit",!0)}}(t,z,5,E)}),0<p.filter(function(t){return t.position.noFit}).nodes().length&&!c.enabled?"nofit":(p.each(function(t){var e=t.position,n=e.y,r=e.width,i=e.side,o=e.anchor,a=e.originalAnchor,l=e.innerSliceCentroid,s=e.outerSliceCentroid,u=e.shifted,c=t.labelContent,h=c.value,f=c.text;T&&"right"===i&&xt(this).html(h+" "+f),xt(this).classed("invisible",!1),function(t,e,n,r,i,o,a){t.y=e+n;var l=t.y,s=Math.asin((l-i.y)/o),u=o*Math.cos(s)+i.x;t.x="left"===r?a.width-u:u}(o,n,K,i,q,L,z);var d={x:"left"===i?r+5:z.width-r-5,y:o.y},p=a.x-(a.x-s.x)*(.1*1.5),g=a.y-(a.y-s.y)*(.1*1.5),m={x:C.outside_labels.edge?p:l.x,y:C.outside_labels.edge?g:l.y},v=m.y<q.y?o.y>g:o.y<g,y=u&&v&&C.outside_labels.edge?{x:p+("left"===i?-F:F),y:g}:null,b=y?y.x:m.x,_={x:"left"===i&&o.x>b||"right"===i&&o.x<b?b:o.x,y:o.y};_.x="left"===i&&q.x<m.x||"right"===i&&m.x<q.x?C.outside_labels.edge?q.x:p:_.x;var x=[d.x,d.y,_.x,_.y];if(y&&x.push.apply(x,[y.x,y.y]),x.push.apply(x,[m.x,m.y]),!x.some(function(t){return isNaN(t)})){var w=x.join(","),M=H.append("g.line-group").datum(t).classed("highlight-element",function(t){return R.includes(t.data[k.name()])});M.append("path.polyline").attr("d","M"+w).attr("stroke",function(){return C.outside_labels.color&&C.outside_labels.edge?A(S(t,t.index)):N?"#fff":"#333"}),C.outside_labels.edge||M.append("circle.line-point").attr("cx",l.x).attr("cy",l.y).attr("r",2).attr("fill",N?"#fff":"#333")}}),ge(u,p,function(t){return t.data[k.name()]},k.name()),p)}function pn(t){var e=t.pie,n=e.pieWidth,h=e.valueColumn,r=e.width;void 0===r&&(r=null);var f=t.labelColumn,d=(t.orderColumn,t.groupKey),p=t.data,g=t.dataSums,m=t.chartContainer,v=t.vis,y=t.config,b=t.smMode,_=t.isBgDark,x=t.highlight,w=t.mobileBreakPoint,M=t.fitChart,k=t.isDonut;function i(t,e){void 0===e&&(e=!1),v.size()[0]<=w&&!y.outside_labels.enabled&&!b&&!M.enabled&&(t=v.size()[0]);var n=k?t/2*(y.donut_hole_size||50)/100:0,r={inner:n,outer:t/2},i=t/2,o=function(t,e,n){function r(t,e){return Ve().outerRadius(t).innerRadius(e).startAngle(function(t){return t.startAngle+n.rotation_angle||0}).endAngle(function(t){return t.endAngle+n.rotation_angle||0})}return{constructArc:r,defaultArc:r(t,e)}}(r.outer,r.inner,y),a=m.append("div.cell"),l=a.append("div.pie-container").st({width:t,height:t}),s=nn(l.append("svg").append("g.pie").translate([i,i]),0,o,f,h,0,d,p,v,y,x);!function(t){var e=t.slices,n=t.pieContainer,r=t.pieTranslate,i=t.innerRadius,o=t.labelColumn,a=t.valueColumn,l=t.data,s=t.dataSums,u=t.vis,c=t.config,h=t.isBgDark;if(t.isDonut&&c.donut_center_label&&c.donut_center_label.enabled){var f=c.donut_center_label,d="";"custom"===f.type?d+='<span class="text-label export-text custom-label">'+(f.custom_text||"")+"</span>":"total"===f.type?d+=rn(a,s,u,f,c):d+=an(o,a,e,l,u,c,f,h);var p=2*i-10,g=n.append("div.center-label.label").st({"max-width":p+"px"}).classed("invisible",!0).html(d),m=u.chart().getElementBounds(g.node()),v={x:r-(m=function t(e,n,r,i){if(void 0===i&&(i=null),n.height>r){var o=(i||parseInt(window.getComputedStyle(e.node()).getPropertyValue("font-size"),10))-1;10<=o&&(e.st({"font-size":o+"px"}),n=t(e,n=u.chart().getElementBounds(e.node()),r,o))}return n}(g,m,p)).width/2,y:r-m.height/2};g.translate([v.x,v.y]).classed("invisible",!1)}}({slices:s,pieContainer:l,pieTranslate:i,innerRadius:n,labelColumn:f,valueColumn:h,data:p,dataSums:g,vis:v,config:y,isBgDark:_,isDonut:k});var u=cn({slices:s,pieContainer:l,radius:r,pieTranslate:i,arcStore:o,labelColumn:f,valueColumn:h,groupKey:d,vis:v,config:y,smMode:b,highlight:x,outsideLabelsFallback:e,isDonut:k});if(!e){!function(t){var e=t.footerLabelData,n=t.labelColumn,r=t.chartContainer,i=t.vis,o=t.smMode,a=t.highlight;if(!e||e.empty()||o)return;var l=r.append("div.footer-label-container");e.each(function(t,e){l.append("span.label.label-group.footer-label").datum(t).classed("highlight-element",function(t){return i.get("highlighted-series",[]).includes(t.data[n.name()])}).html('<span class="num dw-circle">\n                    <span class="label-inner">'+(e+1)+'</span>\n                </span>\n                <span class="label-inner">'+t.data[n.name()]+"</span>")});var s=l.selectAll(".footer-label");ge(a,s,function(t){return t.data[n.name()]},n.name())}({footerLabelData:u?u.filter(".show-in-footer"):null,labelColumn:f,chartContainer:m,vis:v,smMode:b,highlight:x});var c=dn({slices:s,cell:a,pieWidth:t,radius:r,pieTranslate:i,arcStore:o,labelColumn:f,valueColumn:h,groupKey:d,chartContainer:m,vis:v,config:y,smMode:b,isBgDark:_,highlight:x,fitChart:M,isDonut:k});return function(t,e,n,r,i,o,a,l,s,u){if(!s)return;var c=l.small_multiples.group_value_label,h=c.enabled,f=e.append("div.group-label.label");f.append("span.group-label-title.dw-editable.export-text"+(h?".header":"")).attr("data-column",r.name()).attr("data-row","-1").append("span").html(r.title()),h&&("total"===c.type?f.append("div.inner").html(rn(r,o,a,c,l)):f.append("div.inner").html(an(n,r,t,i,a,l,c,u)))}(s,a,f,h,p,g,v,y,b,_),{cell:a,outsideLabels:c}}}var o=i(n);"nofit"===o.outsideLabels&&(o.cell.remove(),i(.8*r,!0));return o}function gn(t,e){var n=function(){return null!==e.node().querySelector(".label:hover")},r=function(){return null!==e.node().querySelector(".pie:hover")};e.selectAll(".pie, .stops").on("mouseleave",function(){n()||t.clear()}),e.selectAll(".label").on("mouseleave",function(){r()||t.clear()}),e.on("click",function(){n()||r()||null!==e.node().querySelector(".stops:hover")||t.clear()})}tn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Je(this,this._t0,Qe(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Je(this,Qe(this,n=Ge(this,t,e)),n);break;default:Je(this,this._t0,n=Ge(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(function(t){this._context=new en(t)}.prototype=Object.create(tn.prototype)).point=function(t,e){tn.prototype.point.call(this,e,t)};var mn=!(en.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}});dw.visualization.register("d3-pies-core",function(){var _t=!0;return{renderCounter:0,render:function(t,e){void 0===e&&(e=null),this.renderCounter++,t.innerHTML="";var n=this,r=n.type(),i=n.dataset,o=n.axes(),a=n.theme(),l=n.chart();if(n.size()[0]<=0||isNaN(n.size()[0]))n.renderingComplete();else{var s=kt(a,"vis.d3-pies.fitchart",0),u=kt(a,"vis.d3-pies.mobileBreakpoint",400),c={enabled:"1"===new URLSearchParams(window.location.search).get("fitchart")||1===s||!0===s,pieSizeReduction:e,stopReRender:!1},h=l.get("metadata.visualize",{}),f=Object.assign(wt,h),d=i.column(o.labels),p=i.list();p.forEach(function(t,e){t.__rowIndex=e,"date"===d.type()&&(t[o.labels]=d.raw(e))});var g,m=!!(a&&a.colors&&a.colors.background&&le(a.colors.background));if(_t){try{var v=this.chart().locales.numeral;v&&(g=v,mn||(be.register("locale","dw",g),be.locale("dw"),mn=!0))}catch(t){console.warn("Couldnt register locale",t)}_t=!1}var y,b,_,x,w,M,k,C,N,A,E,B,T,S,R,P,F,L,z,O,D=!!f.small_multiples&&("multiple-pies"===r||"multiple-donuts"===r),j=D?o.slices:[o.slices],I=i.column(j[0]),$=I,q=(b=d,(y=p).forEach(function(t){for(var e in t)"rowIndex"!==e&&e!==b.name()&&("undefined"!==t[e]&&null!==t[e]&&(n=t[e],"[object String]"!==Mt.call(n))||(t[e]=0),t["__origValue__"+e]=t[e]);var n}),y),K=(_=q,x={},j.forEach(function(e){var t=_.map(function(t){return t[e]}).reduce(function(t,e){return t+e});x[e]=t,x["__origValue__"+e]=t}),x),H=function(o,a,t,e,n){var l=n.group&&n.group.num_slices;if(o.length<=l||!l)return{data:o};var s=o.map(function(t){var e;return(e={__rowIndex:t.__rowIndex})[a.name()]=t[a.name()],e}),u={},c=e.get("highlighted-series",[]);t.forEach(function(n){var t=o.map(function(t){return{index:t.__rowIndex,label:t[a.name()],value:t[n]}});t.sort(function(t,e){return t.value-e.value});var r=o.length-(l-1),i=t.filter(function(t,e){return e<r&&!c.includes(t.label)});o.map(function(e){var t=s.find(function(t){return t.__rowIndex===e.__rowIndex});i.find(function(t){return t.index===e.__rowIndex})?t[n]=0:t[n]=e[n],t["__origValue__"+n]=e[n]});var e=i.reduce(function(t,e){return t+e.value},0);u[n]=e});var r=kt(n,"group.text");r||(r=e.chart().translate("other","chart")),o.map(function(t){return t[a.name()]}).includes(r)&&(r="_"+r);var i={__rowIndex:null};return t.forEach(function(t){var e=u[t];i[a.name()]=r,i[t]=e,i["__origValue__"+t]=e}),{data:s,groupRow:i,groupText:r}}(q,d,j,n,f),U=H.data,W=H.groupRow,V=H.groupText;if(U.sort(function(t,e){return"descending"===f.slice_order?e[$.name()]-t[$.name()]:"ascending"===f.slice_order?t[$.name()]-e[$.name()]:null}),W&&("ascending"===f.slice_order?U.unshift(W):U.push(W)),f.show_percent){var Z=Object.keys(K);U.forEach(function(e){Z.forEach(function(t){e[t]*=100/K[t]})})}w=d,M=I,k=j,C=U,A=f,E=D,F=(N=n).theme(),L=A.base_color||0,B=w,T=M,S=k,R=E,P=[],C.forEach(function(e,t){var n=B.name(),r=e[n],i=e[T.name()];R&&S.map(function(t){return e[t]}).every(function(t){return 0===t})||(R||0!==i)&&P.push(r)}),z=P,O={customColors:A["custom-colors"],keys:z,selectedColor:L,permute:!0},N.autoColor=ee(F,O);var X,Y,G=f.outside_labels&&f.outside_labels.enabled&&f.pie_size?f.pie_size.outside_labels:f.pie_size?f.pie_size.inside_labels:void 0,Q=G?G/100:1,J={top:10,bottom:c.enabled?10:20},tt=xt(t).append("div.root-container").st({margin:J.top+"px 0 "+J.bottom+"px 0"}).classed("defined-highlight",!!n.get("highlighted-series",[]).length),et=(X=tt,Y={delay:100,inactiveOpacity:.2,timer:null,inactive:!0,set:function(e,n){Y.timer&&clearTimeout(Y.timer),Y.timer=setTimeout(function(){Y.inactive=!1,X.selectAll(".slice, .inside-label, .outside-label, .line-group").style("opacity",function(t){return pe(t.data[n],"")===e?1:Y.inactiveOpacity}),X.selectAll(".stop").style("opacity",function(t){return pe(t.label,"")===e?1:Y.inactiveOpacity})},Y.inactive?Y.delay:1)},clear:function(){Y.inactive=!0,Y.timer&&clearTimeout(Y.timer),X.selectAll(".slice, .stop, .label, .line-group").style("opacity",null)}}),nt=function(){return function(t){var e=t.rootContainer,n=t.containerMargin,l=t.labelColumn,s=t.valueColumn,u=t.valueColumns,c=t.groupKey,r=t.data,h=t.vis,f=t.config,d=t.smMode,i=t.highlight,o=t.theme,a=t.mobileBreakPoint,p=h.colorMap(),g=h.chart(),m=h.size()[0]<=a?"top":f.color_key.position,v="left"===m,y="right"===m,b="top"===m||"bottom"===m,_="top"===m,x="bottom"===m,w="50%"===kt(o,"style.chart.legend.swatch.borderRadius",!1)?"dw-circle":"export-rect",M=!d&&f.color_key.label_values,k=xe({config:f,valueColumn:s,chart:g}),C={};r.forEach(function(e,t){var n=l.name(),r=e[n],i=me(t,r,h,f,r===c),o=e[s.name()];if((!d||!u.map(function(t){return e[t]}).every(function(t){return 0===t}))&&(d||0!==o)){var a=[e.__rowIndex];C[i+"---"+r]&&a.push.apply(a,C[i+"---"+r].rows),C[i+"---"+r]={color:i,label:r,value:o,colName:n,isGroup:r===c,rows:a}}});var N=h.get("highlighted-series",[]),A=Object.values(C),E=e.append("div.color-key").classed("left",v).classed("right",y).classed("horizontal",b).classed("top",_).classed("bottom",x).classed("stack",f.color_key.stack);E.classed("top")&&E.st({"margin-top":"-"+n.top+"px"});var B=E.append("div.stops").selectAll(".stop").data(A).enter().append("div.stop").classed("highlight-element",function(t){return N.includes(t.label)});B.append("div.stop-swatch."+w).style("background",function(t){return p(t.color)});var T=B.append("div.stop-label.label").classed("highlight-element",function(t){return N.includes(t.label)}).classed("dw-editable",function(t){return!t.isGroup}).attr("data-column",l.name()).attr("data-row",function(t){return t.rows.join(",")});T.append("span.row-label").style("font-weight",M?"bold":"inherit").html(function(t){return t.label}),M&&T.append("em").style("font-style","normal").html(function(t){return" ("+k(t.value)+")"});var S=g.getElementBounds(E.node()),R=Math.ceil(S.width),P=Math.ceil(S.height);return ge(i,B,function(t){return t.label},function(t){return t.colName}),{colorKey:E,colorKeyPosition:m,colorKeyWidth:R,colorKeyHeight:P}}({rootContainer:tt,containerMargin:J,labelColumn:d,valueColumn:I,valueColumns:j,groupKey:V,data:U,vis:n,config:f,smMode:D,highlight:et,theme:a,mobileBreakPoint:u})},rt=f.color_key&&f.color_key.enabled&&(!f.outside_labels.enabled||D)?nt():null,it=tt.append("div.chart-container"),ot=se(it,rt,l).width,at=[];if(D){for(var lt=ue({valueColumns:j,width:ot,definedWidthFactor:Q,chartContainer:it,config:f,fitChart:c}),st=0;st<j.length;st++)lt[st].valueColumn=i.column(j[st]);lt.forEach(function(t){return at.push(t)})}else{var ut=ot*Q;if(c.enabled){var ct=c.pieSizeReduction||0,ht=n.size()[1]-ct;ht<ut&&(ut=ht)<1&&(ut=1,c.stopReRender=!0)}at.push({pieWidth:ut,valueColumn:I,width:ot})}var ft={outsideLabelsNoFit:!1};at.forEach(function(t){"nofit"===pn({pie:t,labelColumn:d,orderColumn:$,groupKey:V,data:U,dataSums:K,chartContainer:it,vis:n,config:f,smMode:D,isBgDark:m,highlight:et,mobileBreakPoint:u,fitChart:c,isDonut:"donuts"===r||"multiple-donuts"===r}).outsideLabels&&(ft.outsideLabelsNoFit=!0)}),ft.outsideLabelsNoFit&&(rt=nt(),se(it,rt,l));var dt=it.node().offsetHeight;if(rt&&("top"!==rt.colorKeyPosition&&"bottom"!==rt.colorKeyPosition||(dt+=rt.colorKeyHeight),dt=Math.max(dt,rt.colorKeyHeight)),tt.st({height:dt}),gn(et,tt),c.enabled&&this.renderCounter<20){var pt=tt.node(),gt=pt.scrollHeight,mt=pt.offsetHeight,vt=n.size()[1]-12;if(vt<gt&&!c.stopReRender){var yt=gt-vt+(c.pieSizeReduction||0);this.render(t,yt)}if(mt<vt){var bt=vt-mt;tt.st({height:dt+bt})}}n.renderingComplete()}},keys:function(){var n=this.axes(!0).labels,r=[];return n.each(function(t,e){r.push("date"===n.type()?n.raw(e):t)}),r}}}),dw.visualization.register("d3-donuts","d3-pies-core",{type:function(){return"donuts"}})}();
